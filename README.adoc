= FHIR Bridge PoC

Proof of concept implementation of the https://github.com/ehrbase/fhir-bridge[FHIR Bridge] application using
https://camel.apache.org/[Apache Camel] and https://github.com/oehf/ipf[Open eHealth Integration Platform].

== Getting Started

=== Build the application

[source]
----
mvn clean install
----

=== Build the application and execute integration tests

----
mvn clean install -DskipITs=false
----

WARNING: When using `-DskipITs=false` option, please make sure you have an EHRbase instance up and running.

=== Run the application

[source]
----
java -jar fhir-bridge-poc-0.3.0-SNAPSHOT.jar
----

== Configuration Properties

|===
|Key | Default Value |Description

|`fhir-bridge.ehrbase.base-url`
|`http://localhost:8080/ehrbase/rest/openehr/v1/`
|Base URL for the EHRbase running instance.

|`fhir-bridge.fhir.jpa.allow-external-references`
|`true`
|Allow remote references.

|`fhir-bridge.fhir.validation.terminology.mode`
|`embedded`
|Terminology validation mode: `embedded`, `server`, `none`

|`fhir-bridge.fhir.validation.terminology.server-url`
|
|Base URL of the server used for the terminology validation.

|`ipf.atna.audit-enabled`
|`true`
|Whether auditing is enabled.

|`ipf.atna.audit-repository-host`
|`localhost`
|Host of the ATNA repository to send the events to.

|`ipf.atna.audit-repository-port`
|`3001`
|Port of the ATNA repository to send the events to.

|`spring.application.name`
|`FHIR Bridge PoC`
|Application name.

|`spring.datasource.password`
|
|Login password of the database.

|`spring.datasource.url`
|
|JDBC URL of the database.

|`spring.datasource.username`
|
|Login username of the database.

|`spring.jpa.properties.hibernate.search.default.indexBase`
|`${java.io.tmpdir}/fhir-bridge-poc/indexes`
|Default base directory for the indexes.

|`server.port`
|`8888`
|Server HTTP port.

|`server.servlet.context-path`
|`/fhir-bridge-poc`
|Context path of the application.

|===

== Database
The database creation scripts are available for PostgreSQL and H2 in the following location: `src/main/resources/schema`